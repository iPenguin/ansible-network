---

- name: server setup
  hosts: all
  remote_user: ansible
  become: yes
  vars:
    sshd: global_sshd
    ssh_client_configurations: global_ssh_client_configurations

  roles:
    - role: oefenweb.ssh_client
      tags:
        - ssh
        - client
    - role: willshersystems.sshd
      tags:
        - ssh
        - server

  # tasks:
  #   - name: Test if tasks work in roles
  #     authorized_key:
  #       user: "{{ item }}"
  #       key: "files/{{ item }}.pub"
  #       state: present
  #     loop:
  #       - "brian"
  #     tags:
  #       - ssh
  #       - client
  #       - keys
